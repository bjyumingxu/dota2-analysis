# 🚀 Dota2战绩分析网页 - 部署指南

## 📋 部署概览

本项目需要部署两个部分：
1. **后端API**（FastAPI）- 提供数据接口
2. **前端页面**（Vue 3）- 用户界面

## 🎯 推荐部署方案

### 方案1：Railway + Vercel（推荐，最简单）
- **后端**：Railway（免费额度充足，配置简单）
- **前端**：Vercel（免费，自动部署，速度快）

### 方案2：Render + Netlify
- **后端**：Render（免费，但可能较慢）
- **前端**：Netlify（免费，功能强大）

### 方案3：Vercel全栈（如果支持Python）
- **后端+前端**：都部署在Vercel（需要确认Vercel是否支持Python后端）

---

## 📦 部署前准备

### 1. 代码准备

✅ **已完成**：
- 所有代码已编写完成
- 功能已测试通过
- 代码结构清晰

### 2. 需要准备的文件

我会帮你创建以下文件：
- `backend/railway.json` 或 `backend/render.yaml`（后端部署配置）
- `frontend/vercel.json`（前端部署配置）
- `.env.example`（环境变量示例）
- `部署步骤.md`（详细操作指南）

---

## 🚀 部署步骤（Railway + Vercel方案）

### 第一步：部署后端（Railway）

#### 1.1 注册Railway账号
- 访问：https://railway.app
- 使用GitHub账号登录（推荐）

#### 1.2 创建新项目
- 点击"New Project"
- 选择"Deploy from GitHub repo"
- 选择你的代码仓库

#### 1.3 配置环境变量
在Railway项目设置中添加：
```
OPENDOTA_API_BASE_URL=https://api.opendota.com/api
STEAM_API_KEY=（如果需要，可以留空）
```

#### 1.4 配置启动命令
Railway会自动检测Python项目，但需要确认：
- **启动命令**：`uvicorn src.main:app --host 0.0.0.0 --port $PORT`
- **Python版本**：3.11+

#### 1.5 获取后端URL
部署完成后，Railway会提供一个URL，例如：
```
https://your-app.railway.app
```
**保存这个URL，后面配置前端时需要！**

---

### 第二步：部署前端（Vercel）

#### 2.1 注册Vercel账号
- 访问：https://vercel.com
- 使用GitHub账号登录（推荐）

#### 2.2 创建新项目
- 点击"Add New Project"
- 导入你的GitHub仓库
- 选择 `frontend` 目录作为根目录

#### 2.3 配置环境变量
在Vercel项目设置中添加：
```
VITE_API_BASE_URL=https://your-app.railway.app
```

#### 2.4 修改前端配置
需要修改 `frontend/vite.config.ts`，将代理地址改为生产环境的API地址。

#### 2.5 部署
- Vercel会自动构建和部署
- 部署完成后会提供一个URL，例如：
```
https://your-app.vercel.app
```

---

## 🔧 需要修改的配置

### 后端配置

**文件**：`backend/src/core/config.py`
- 确保环境变量正确读取
- 确保CORS允许前端域名访问

### 前端配置

**文件**：`frontend/vite.config.ts`
- 生产环境需要直接使用API URL，而不是代理

**文件**：`frontend/src/pages/HomePage.vue`
- API请求需要根据环境使用不同的base URL

---

## 📝 部署检查清单

### 后端检查
- [ ] Railway项目已创建
- [ ] 环境变量已配置
- [ ] 代码已推送到GitHub
- [ ] 部署成功，可以访问健康检查接口
- [ ] API文档可以访问（/docs）

### 前端检查
- [ ] Vercel项目已创建
- [ ] 环境变量已配置
- [ ] API地址已更新
- [ ] 代码已推送到GitHub
- [ ] 部署成功，可以访问页面
- [ ] 可以正常查询账号

---

## 🐛 常见问题

### Q1: Railway部署失败？
**A**: 
- 检查Python版本（需要3.11+）
- 检查requirements.txt是否正确
- 查看Railway的部署日志

### Q2: Vercel部署失败？
**A**: 
- 检查Node.js版本
- 检查package.json是否正确
- 查看Vercel的构建日志

### Q3: 前端无法连接后端？
**A**: 
- 检查CORS配置（后端需要允许前端域名）
- 检查API地址是否正确
- 检查环境变量是否配置

### Q4: API请求失败？
**A**: 
- 检查后端是否正常运行
- 检查网络连接
- 查看浏览器控制台错误信息

---

## 📚 下一步

我会帮你：
1. 创建所有部署配置文件
2. 修改代码以支持生产环境
3. 提供详细的部署步骤文档
4. 指导你完成部署过程

**准备好后，告诉我你想使用哪个部署方案，我会开始准备相应的配置文件！** 🚀

