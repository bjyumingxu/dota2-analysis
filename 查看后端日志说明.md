# 如何查看后端日志

## 📋 日志输出位置

后端日志会直接输出到**运行后端的终端窗口**中。

## 🔍 查看日志的步骤

### 1. 找到运行后端的终端窗口

后端服务启动后，会显示类似这样的信息：
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Started reloader process
INFO:     Started server process
```

### 2. 在这个终端窗口中查看日志

当你查询一个账号时，日志会实时显示在这个窗口中。

## 📊 日志内容说明

### 点评生成日志
```
INFO: 生成点评 - 总场次: 20, 胜场: 11, 胜率: 55.00%, KDA: 2.10
INFO: 生成的点评: 胜率55%勉强能看，KDA 2.10就这？典型的混子数据，别拖累队友了
```

### 比赛详情获取日志
```
DEBUG: 获取比赛 1234567890 详情...
INFO: 比赛 1234567890 第一个玩家数据示例: {'account_id': 123, 'personaname': '玩家昵称', ...}
INFO: 比赛 1234567890 players数组长度: 10
```

### 昵称获取日志
```
INFO: 队友 123456789 的player数据字段: ['account_id', 'personaname', 'kills', ...]
INFO: ✅ 从比赛详情获取到队友 123456789 Dota2昵称: 玩家昵称
```

或者如果获取失败：
```
WARNING: ❌ 队友 123456789 的player数据中没有找到昵称字段
INFO: 🔍 尝试从OpenDota API获取队友 123456789 昵称...
INFO: ✅ 获取玩家 123456789 信息成功
INFO: 玩家 123456789 数据键: ['profile', 'solo_competitive_rank', ...]
INFO: 玩家 123456789 profile数据: {'personaname': '玩家昵称', ...}
```

## 🐛 如果看不到日志

### 方法1：检查日志级别
确保日志级别设置为INFO或DEBUG。代码中已经设置为INFO级别。

### 方法2：查看完整输出
如果终端窗口太小，可以：
- 滚动查看历史日志
- 或者将日志输出到文件（见下方）

### 方法3：将日志保存到文件

修改启动命令，将日志保存到文件：

```bash
# Windows PowerShell
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000 2>&1 | Tee-Object -FilePath backend.log

# 或者使用重定向
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000 > backend.log 2>&1
```

然后可以用文本编辑器打开 `backend.log` 文件查看。

## 📝 关键日志标识

- ✅ 表示成功
- ❌ 表示失败
- 🔍 表示正在尝试
- INFO: 一般信息
- WARNING: 警告信息
- ERROR: 错误信息
- DEBUG: 调试信息（最详细）

## 🔧 常见问题

### Q: 日志太多，找不到关键信息？
**A:** 使用搜索功能（Ctrl+F）搜索关键词：
- `生成点评` - 查看点评生成过程
- `获取到队友` - 查看昵称获取情况
- `数据键` - 查看API返回的数据结构
- `❌` - 查看所有失败的操作

### Q: 看不到任何日志？
**A:** 
1. 确认后端服务正在运行
2. 确认你在正确的终端窗口
3. 尝试查询一个账号，看是否有新日志出现

### Q: 如何查看完整的API返回数据？
**A:** 日志中会显示：
- `数据键: [...]` - 显示返回数据的所有字段名
- `完整数据: {...}` - 显示完整的JSON数据（DEBUG级别）
- `profile数据: {...}` - 显示profile对象的内容

## 💡 提示

1. **保持终端窗口打开**：不要关闭运行后端的终端窗口
2. **实时查看**：查询账号时，日志会实时显示
3. **复制日志**：如果遇到问题，可以复制相关日志发给我

